<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Generado</title>
    <script src="fragment/js/lib/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="fragment/js/lib/materialize/css/materialize.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="fragment/js/lib/icomoon/style.css">


</head>
<body >
    <div id="content">
        <!--Aqui se autogenera el html dinaico-->
    </div>
    <script type="text/javascript">
        var intervalId;

        var destroy = function(){
            alert(intervalId);
            clearInterval(intervalId);
        };

        var my_slider = function(){
            //console.log($("title").text());
            var timeExpire = 5000;
            var count = 0;

            // buscando modulo de imagenes ya que las mismas manejan la capaciad de agregar influenciadores
            $('[type="Imagen"]').each(function(i){
                var params = JSON.parse($( this ).attr("params"));
                if (params.isInfluencer !== undefined && params.isInfluencer === true){
                    count ++;
                    var self = $(this);
                    // sincronizando influenciador
                    setTimeout(function(){
                        var changeInfluencer;
                        intervalId = setInterval(function(){
                            // cambiando imagenes
                            self.find("img").attr("src",(self.find("img").attr("src") === "images/office.jpg" ? "images/sample-1.jpg" : "images/office.jpg"));

                            var name = params.name;
                            // buscando los textos cuya target se defina en el bloque de imagen influenciador
                            $("div[type='Text']").each(function(e){
                                var paramsText = JSON.parse($( this ).attr("params"));

                                if (params.nameTarget !== undefined && paramsText.name === params.nameTarget){
                                    $(this).text("Influenciador");

                                    // solo entra una vez
                                    return false;
                                }
                            });
                        },count * timeExpire)
                    },count * timeExpire);
                }
          })
        };

        var execute = function(){
            my_slider();
        };

        jQuery(function(){
            execute();
        });
    </script>
    <div id="script">
        <script type="text/javascript">
            // script
        </script>
    </div>
    <script src="fragment/js/lib/materialize/js/materialize.min.js"></script>
</body>
</html>